# 代码文件头部注释优化计划

您指出目前的文件头部注释（如 `equity.py`）过于简单，无法一眼看出文件的作用。我将遍历核心代码文件，为它们添加**描述性的中文功能说明**。

## 待优化文件清单及说明

我将更新以下文件的头部注释：

### 1. 核心回测模块 (`common_core/backtest/`)
*   **`equity.py`**:
    *   *说明*: 核心资产计算模块。负责根据策略信号、行情数据、费率等，计算资金曲线、持仓价值和爆仓风险。
*   **`evaluate.py`**:
    *   *说明*: 策略绩效评估模块。计算年化收益、最大回撤、夏普比率、胜率等关键指标，并生成分月/分年收益表。
*   **`simulator.py`**:
    *   *说明*: 高性能回测仿真器（基于 Numba）。模拟交易所撮合逻辑，处理开平仓、资金费结算，提供极速的回测执行。

### 2. 核心交易模块 (`common_core/exchange/`)
*   **`binance_async.py`**:
    *   *说明*: 币安异步交易客户端。基于 AsyncIO 实现高并发行情获取与交易指令发送，大幅提升数据下载和实盘响应速度。
*   **`base_client.py`**:
    *   *说明*: 交易所客户端基类。定义通用的连接管理、签名鉴权、错误处理逻辑，规范化所有交易所接口。
*   **`standard_client.py`**:
    *   *说明*: 币安标准同步客户端。提供传统的同步接口调用方式，用于兼容旧代码或低频操作场景。

### 3. 工具模块 (`common_core/utils/`)
*   **`commons.py`**:
    *   *说明*: 通用工具函数库。包含重试装饰器、时间计算、精度处理等常用辅助功能。
*   **`async_commons.py`**:
    *   *说明*: 异步工具函数库。包含异步重试装饰器、并发控制等辅助功能。
*   **`path_kit.py`**:
    *   *说明*: 路径管理工具。自动识别操作系统，统一管理数据、配置、日志等文件夹路径。
*   **`dingding.py`**:
    *   *说明*: 消息推送工具。集成钉钉/企业微信 Webhook，用于发送实盘交易信号、报错报警和状态监控。

### 4. 策略模块 (`二号网格策略/program/`)
*   **`step1_prepare_data.py`**:
    *   *说明*: 策略数据准备脚本。负责读取历史 CSV/Parquet 数据，清洗格式，对齐时间戳，为回测提供标准输入。
*   **`step2_strategy.py`**:
    *   *说明*: 网格策略核心逻辑。实现等差/等比网格生成、挂单逻辑、仓位管理及盈亏计算。

## 执行动作
我将逐个修改上述文件的头部注释块，用通俗易懂的中文替换掉原本简单的文件名。

例如 `equity.py` 将变为：
```python
"""
Quant Unified 量化交易系统
[核心资产计算模块]
功能：负责根据策略信号、行情数据、费率等，计算资金曲线、持仓价值和爆仓风险。
"""
```